<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Pendaftaran Pasien Baru</title>
    <link rel="stylesheet" href="/style/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Borel&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Borel&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <header>
        <div class="navbar">
            <a href="index.html" class="action_btn">Dashboard</a>
            <div class="toggle_btn">
                <i class="fa-solid fa-bars"></i>
            </div>
        </div>
        <div class="dropdown_menu">
            <li><a href="#" id="open-popup-dropdown">Bantuan</a></li>
            <li><a href="#" id="open-popup-terms-dropdown">Syarat & Ketentuan</a></li>
            <li><a href="#" class="action_btn">Dashboard</a></li>
        </div>
    </header>
    
    <form class="card-lama" id="registrationFormlama">
        <div class="card-body-lama">
            <h2>Pendaftaran Pasien Lama</h2>
            <label for="NO_RM">No. Rekam Medis:</label>
            <input type="text" id="NO_RM" name="NO_RM" required>

            <label for="Tgl_lahir">Tanggal Lahir:</label>
            <input type="date" id="Tgl_lahir" name="Tgl_lahir" required>

            <label for="Cr_Byr">Cara Bayar:</label>
            <select id="Cr_Byr" name="Cr_Byr" required>
                <option value="BPJS">BPJS</option>
                <option value="ANSURANSI">ANSURANSI</option>
                <option value="UMUM">UMUM</option>
                <option value="LAIN-LAIN">LAIN-LAIN</option>
            </select>
    
            <label for="Wkt_pendaftaran">Waktu Pendaftaran:</label>
            <div class="radio-buttons">
                <input type="radio" id="pagi" name="Wkt_pendaftaran" value="Pagi" required>
                <label for="pagi">Pagi</label>
                <input type="radio" id="siang" name="Wkt_pendaftaran" value="Siang" required>
                <label for="siang">Siang</label>
                <input type="radio" id="sore" name="Wkt_pendaftaran" value="Sore" required>
                <label for="sore">Sore</label>
            </div>
            <button type="submit">Submit</button>
        </div>
    </form>

    <footer>
        <div class="container">
            <p>&copy; 2024 @anggii.ajaaa</p>
        </div>
    </footer>

    <script>
    document.getElementById('registrationFormlama').addEventListener('submit', function(event) {
    event.preventDefault(); // Mencegah pengiriman formulir

    // Mengambil data dari formulir
    const NO_RM = document.getElementById('NO_RM').value;
    const Tgl_lahir = document.getElementById('Tgl_lahir').value;
    const Cr_Byr = document.getElementById('Cr_Byr').value;
    const Wkt_pendaftaran = document.querySelector('input[name="Wkt_pendaftaran"]:checked').value;

    // Menampilkan popup konfirmasi menggunakan SweetAlert
    Swal.fire({
        title: 'Konfirmasi Pendaftaran',
        html: `
            <div class="card" >
                <div class="card-body text-start ">
                    <table>
                        <tr>
                            <td><strong>No. Rekam Medis</strong></td>
                            <td style="padding-left: 10px; padding-bottom: 7px;"><strong>:</strong> ${NO_RM}</td>
                        </tr>
                        <tr>
                            <td><strong>Tanggal Lahir</strong></td>
                            <td style="padding-left: 10px; padding-bottom: 7px;"><strong>:</strong> ${Tgl_lahir}</td>
                        </tr>
                        <tr>
                            <td><strong>Cara Bayar</strong></td>
                            <td style="padding-left: 10px; padding-bottom: 7px;"><strong>:</strong> ${Cr_Byr}</td>
                        </tr>
                        <tr>
                            <td><strong>Waktu Pendaftaran</strong></td>
                            <td style="padding-left: 10px; padding-bottom: 7px;"><strong>:</strong> ${Wkt_pendaftaran}</td>
                        </tr>
                    </table>
                </div>
            </div>
        `,
        icon: 'info',
        showCancelButton: true,
        confirmButtonText: 'Konfirmasi',
        cancelButtonText: 'Batal'
    }).then((result) => {
        if (result.isConfirmed) {
            // Jika pengguna mengkonfirmasi, tampilkan pesan sukses
            Swal.fire({
                title: 'Pendaftaran Berhasil!',
                text: 'Data pendaftaran Anda telah berhasil disimpan.',
                icon: 'success'
            }).then(() => {
                // Kirim formulir setelah menampilkan pesan sukses
                document.getElementById('registrationFormlama').submit();
            });
        } else {
            // Jika pengguna membatalkan, tampilkan pesan kekecewaan
            Swal.fire({
                title: 'Pendaftaran Dibatalkan',
                text: 'Terima kasih atas keputusannya. Semoga tetap sehat dan sejahtera. Jika butuh kami di lain waktu, silakan hubungi.',
                icon: 'error'
            });
        }
    });
});
    </script>
    <script src="/script/main.js"></script>
</body>
</html>
